# ======================================================================
# Azt3kNet application defaults
# Copy this file to `.env` and adjust values for your workstation.
# ======================================================================

# General application settings
AZT3KNET_ENVIRONMENT=development
AZT3KNET_LOG_LEVEL=INFO
AZT3KNET_DEFAULT_SEED=20241005
AZT3KNET_TIMEZONE=UTC
AZT3KNET_PREVIEW_LIMIT=25

# API server configuration
API_APP_MODULE=azt3knet.api.main:app
API_HOST=0.0.0.0
API_PORT=8000
API_RELOAD_FLAG=--reload

# Storage configuration
# When using docker-compose the service hostnames (postgres, redis, ollama)
# are reachable from the API container. Adjust these values if running the
# application outside of Docker.
DATABASE_BACKEND=postgres
DATABASE_URL=postgresql+psycopg://azt3knet:azt3knet@postgres:5432/azt3knet
SQLITE_URL=sqlite+aiosqlite:///./azt3knet.db
ALEMBIC_CONFIG=infra/migrations/alembic.ini
POSTGRES_IMAGE=pgvector/pgvector:pg16
POSTGRES_ENABLE_TIMESCALEDB=false
POSTGRES_SHARED_BUFFERS=256MB
TIMESCALEDB_MAX_MEMORY=512MB
POSTGRES_PORT=5432

# Object storage (MinIO / S3-compatible)
MINIO_ROOT_USER=azt3knet
MINIO_ROOT_PASSWORD=azt3knet123
MINIO_PORT=9000
MINIO_CONSOLE_PORT=9001
MINIO_ENDPOINT=http://localhost:9000
MINIO_ENDPOINT_INTERNAL=http://minio:9000
MINIO_REGION=us-east-1
MINIO_ACCESS_KEY=azt3knet
MINIO_SECRET_KEY=azt3knet123
MINIO_USE_SSL=false
AZT3KNET_BLOB_BUCKET=azt3knet
# Optional comma-separated list when multiple buckets are required
# AZT3KNET_BLOB_BUCKETS=azt3knet,azt3knet-preview

# Messaging / background jobs
REDIS_URL=redis://redis:6379/0
REDIS_PORT=6379
QUEUE_POPULATION=population
QUEUE_CONTENT=content
QUEUE_SIMULATION=simulation

# Observability
PROMETHEUS_PORT=9000
PROMETHEUS_SERVER_PORT=9090
GRAFANA_PORT=3000
GRAFANA_ADMIN_USER=admin
GRAFANA_ADMIN_PASSWORD=azt3knet
OTEL_EXPORTER_OTLP_ENDPOINT=http://localhost:4317
OTEL_SERVICE_NAME=azt3knet

# Ollama configuration
OLLAMA_BASE_URL=http://ollama:11434
OLLAMA_MODEL=deepseek-r1:1.5b
OLLAMA_TIMEOUT=30
OLLAMA_PORT=11434

# Feature flags
AZT3KNET_COMPLIANCE_ENABLED=true
ENABLE_METRICS=true
ENABLE_TRACING=true

# Container image overrides
CLOUDFLARED_IMAGE=cloudflare/cloudflared:2024.8.1
REDIS_IMAGE=redis:7-alpine
OLLAMA_IMAGE=ollama/ollama:latest
MINIO_IMAGE=minio/minio:latest
PROMETHEUS_IMAGE=prom/prometheus:v2.53.1
GRAFANA_IMAGE=grafana/grafana:10.4.3

# ----------------------------------------------------------------------
# Mailjet + Cloudflare mail stack configuration
# ----------------------------------------------------------------------

# Cloudflare DNS configuration
CLOUDFLARE_API=https://api.cloudflare.com/client/v4
CLOUDFLARE_API_TOKEN=changeme
CLOUDFLARE_ZONE_ID=changeme
CLOUDFLARE_ZONE_NAME=azt3knet.example

# Mailjet endpoints and credentials
MAILJET_API=https://api.mailjet.com
MAILJET_API_KEY=changeme
MAILJET_API_SECRET=changeme
MAILJET_SMTP_HOST=in-v3.mailjet.com
MAILJET_SMTP_PORT=587
MAILJET_SMTP_USER=
MAILJET_SMTP_PASS=
MAILJET_MX_HOSTS=in.mailjet.com,in-v3.mailjet.com
MAILJET_SPF_INCLUDE=include:spf.mailjet.com
MAILJET_INBOUND_URL=
MAILJET_INBOUND_SECRET=

# Agent mailbox defaults
AZT3KNET_DOMAIN=azt3knet.example
AZT3KNET_AGENT_MAIL_PREFIX=agent_
AZT3KNET_MAIL_TTL=300

# Cloudflare Tunnel (optional)
CLOUDFLARE_TUNNEL_TOKEN=
CLOUDFLARE_TUNNEL_HOSTNAME=api.azt3knet.example
CLOUDFLARE_TUNNEL_SERVICE=http://api:8000
CLOUDFLARE_TUNNEL_CNAME=
CLOUDFLARE_TUNNEL_SUBDOMAIN=api
CLOUDFLARE_TUNNEL_CNAME_TTL=300
